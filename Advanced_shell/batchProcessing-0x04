#!/bin/bash

SCRIPT_TO_CHECK="fetch_pokemon_parallel.sh"  # Script you want to verify
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

echo "=== Checking Parallel PokÃ©mon Fetch Script ==="

# 1ï¸âƒ£ Check if PokÃ©mon list exists
missing_pokemon=false
for p in "${POKEMON_LIST[@]}"; do
    if ! grep -q "$p" "$SCRIPT_TO_CHECK"; then
        echo "âŒ PokÃ©mon '$p' not found in script"
        missing_pokemon=true
    fi
done
if [ "$missing_pokemon" = false ]; then
    echo "âœ… All PokÃ©mon names found in script"
fi

# 2ï¸âƒ£ Check if background process operator '&' is used
if grep -E "fetch_pokemon.*\&" "$SCRIPT_TO_CHECK" >/dev/null; then
    echo "âœ… Background process usage found"
else
    echo "âŒ No background process '&' usage detected"
fi

# 3ï¸âƒ£ Check if 'wait' is present to handle processes
if grep -q "wait" "$SCRIPT_TO_CHECK"; then
    echo "âœ… 'wait' command found for process synchronization"
else
    echo "âŒ 'wait' command missing"
fi

# 4ï¸âƒ£ Final status
if grep -E "fetch_pokemon.*\&" "$SCRIPT_TO_CHECK" >/dev/null && grep -q "wait" "$SCRIPT_TO_CHECK"; then
    echo "ğŸ¯ Script handles parallel processes and waits for completion"
else
    echo "âš ï¸ Script does not fully meet parallel processing requirements"
fi
